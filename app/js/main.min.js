const regEmail=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,regName=/^([a-zA-Z]+|[а-яА-ЯёЁ]+)$/,regPassword=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/,validName="The name must contain only letters",validLastName="The last name must contain only letters",validEmail="email should be like this alice.miller@yahoo.com",validPassword="The user password must contain at least 8 characters, uppercase and lowercase letters, and numbers",validConfirmPassword="Password mismatch",validBirth="Fill in the date of birth",validGender="select gender",validNationality="select nationality",form=document.querySelector("#form"),send=document.querySelector("#send"),formComponent=document.querySelector(".form"),successComponent=document.querySelector(".success");send.addEventListener("click",(e=>{e.preventDefault();let t=!0;const s={name:"",lastName:"",nationality:"",email:"",gender:null,birth:{day:null,month:null,year:null},password:null,confirmPassword:null},a=(e,s)=>{console.log(e.name),t=!1,e.nextElementSibling.textContent=s,e.style.color="red",e.style.borderBottom="1px solid red"},l=e=>{s[e.name]=e.value,"INPUT"===e.tagName&&(e.nextElementSibling.textContent="",e.style.borderBottom="1px solid black")};regName.test(form.elements.name.value)?l(form.elements.name):a(form.elements.name,validName),regName.test(form.elements.lastName.value)?l(form.elements.lastName):a(form.elements.lastName,validLastName),form.elements.nationality.value&&l(form.elements.nationality),form.elements.gender.value&&l(form.elements.gender),regEmail.test(form.elements.email.value)?l(form.elements.email):a(form.elements.email,validEmail),form.elements.day.value&&l(form.elements.day),form.elements.month.value&&l(form.elements.month),form.elements.year.value&&l(form.elements.year),regPassword.test(form.elements.password.value)?l(form.elements.password):a(form.elements.password,validPassword);const o=form.elements.password.value!==form.elements.confirmPassword.value;!regPassword.test(form.elements.password.value)||o?a(form.elements.confirmPassword,"Password mismatch"):l(form.elements.confirmPassword),t&&(!async function(){try{if(!(await fetch("http://localhost:3001/point",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw send.classList.add("reject"),console.log(send),new Error("Ошибка при отправке данных");formComponent.style.display="none",successComponent.style.display="block"}catch(e){console.error("Произошла ошибка:",e)}}(),form.reset())}));